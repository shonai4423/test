# マインスイーパー - Minesweeper Game

クラシックなマインスイーパーゲームの現代的な実装。3つの難易度、統計機能、美しいUIを備えています。

## 主な機能

### 💣 ゲームプレイ
- **完全なマインスイーパールール**
  - 地雷のないマスをすべて開く
  - 数字は周囲8マスの地雷数
  - 旗で地雷をマーク

- **3つの難易度**
  - 初級：9×9マス、地雷10個
  - 中級：16×16マス、地雷40個
  - 上級：16×30マス、地雷99個

- **安全な開始**
  - 最初のクリックは必ず安全
  - クリック位置の周囲も地雷なし

### 🎮 操作方法
- **左クリック** - マスを開く
- **右クリック** - 旗を立てる/はてな/解除
- **タイマー** - 自動計測

### 📊 統計機能
- クリア数
- 最速タイム
- 総ゲーム数
- 勝率
- LocalStorageで永続化

### 🎨 ビジュアル
- **カラフルな数字**
  - 1: 青
  - 2: 緑
  - 3: 赤
  - 4: 紫
  - 5〜8: その他

- **アニメーション**
  - 地雷爆発エフェクト
  - セルホバー効果
  - スムーズな遷移

## ゲームルール

### 基本ルール
1. マスをクリックして開く
2. 数字は周囲8マスの地雷数を示す
3. 地雷のないマスをすべて開けばクリア
4. 地雷を踏むとゲームオーバー

### 旗システム
- 右クリック1回目：旗（🚩）
- 右クリック2回目：はてな（❓）
- 右クリック3回目：解除

### 連鎖開放
- 0（周囲に地雷なし）のマスを開くと、周囲も自動で開く
- 効率的にマスを開ける

## 技術的特徴

### データ構造
```javascript
// ボード: -1 = 地雷, 0-8 = 周囲の地雷数
board[row][col]

// 状態管理
revealed[row][col]  // 開いたか
flagged[row][col]   // 0=なし, 1=旗, 2=はてな
```

### 地雷配置アルゴリズム
```javascript
placeMines(firstRow, firstCol) {
    // 最初のクリック位置とその周囲を避ける
    if (Math.abs(row - firstRow) <= 1 &&
        Math.abs(col - firstCol) <= 1) {
        continue;
    }

    // ランダムに配置
    // 周囲の数字を更新
}
```

### 連鎖開放
```javascript
revealCell(row, col) {
    revealed[row][col] = true;

    if (board[row][col] === 0) {
        // 周囲8マスも開く（再帰）
        forEachNeighbor(row, col, revealCell);
    }
}
```

### 勝利判定
```javascript
checkWin() {
    // 開いたマス数 = 全マス数 - 地雷数
    if (revealedCount === totalCells - totalMines) {
        win();
    }
}
```

## 攻略のコツ

### 初心者向け
1. **角から攻める** - 安全な場所が多い
2. **1-1パターン** - 確実に開ける場所を見つける
3. **焦らない** - 確実な場所から開く

### 中級者向け
1. **1-2-1パターン** を覚える
2. **端の処理** を効率化
3. **旗は必要最小限** に

### 上級者向け
1. **パターン認識** を磨く
2. **確率思考** を使う
3. **運と実力** のバランス

## よくあるパターン

### 1-2-1パターン
```
[ ][ ][ ]
[1][2][1]
[ ][ ][ ]
```
→ 2の上下どちらかに地雷

### 1-1パターン
```
[ ][1]
[1][ ]
```
→ 対角線上のどちらかに地雷

## カスタマイズ

### 難易度追加
```javascript
this.difficulties = {
    easy: { rows: 9, cols: 9, mines: 10 },
    custom: { rows: 20, cols: 20, mines: 50 }
};
```

### セルサイズ変更
```css
:root {
    --cell-size: 30px;  /* サイズ調整 */
}
```

### カラー変更
```css
.cell.opened[data-number="1"] {
    color: #3b82f6;  /* 好きな色に */
}
```

## パフォーマンス

- 軽量実装（外部ライブラリ不要）
- 効率的なDOM操作
- 再帰処理の最適化
- メモリ効率的な配列管理

## ブラウザ対応

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 今後の拡張予定

- [ ] カスタム難易度設定
- [ ] リプレイ機能
- [ ] ヒント機能
- [ ] ランキングシステム
- [ ] タイムアタックモード
- [ ] マルチプレイヤー
- [ ] テーマカスタマイズ

## 技術スタック

- **HTML5**: セマンティックマークアップ
- **CSS3**: Grid, Flexbox, Animations, Variables
- **JavaScript ES6+**: Classes, LocalStorage
- **Web Audio API**: サウンド効果

## マインスイーパーの歴史

- 1990年にWindows 3.0に標準搭載
- 世界中で最も遊ばれたパズルゲームの一つ
- プロプレイヤーによる競技も存在

## 世界記録

- 初級：1秒台
- 中級：7秒台
- 上級：30秒台

## ライセンス

MIT License

---

**プレイのヒント**: 最初は初級から始めて、パターンを覚えましょう！
