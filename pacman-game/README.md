# パックマン - Pac-Man Game

クラシックなパックマンゲームの現代的な実装。4体のゴースト、パワーモード、フルーツボーナスを備えています。

## 主な機能

### 🎮 ゲームプレイ
- **クラシックなパックマンゲーム**
  - すべてのドットを食べてレベルクリア
  - ゴーストから逃げながらドット回収
  - パワーエサでゴーストを食べられる

- **4体のゴースト**
  - 🔴 Blinky（赤）- 直接追跡
  - 🩷 Pinky（ピンク）- 先回り
  - 🩵 Inky（水色）- 連携攻撃
  - 🟠 Clyde（オレンジ）- ランダム

- **レベルシステム**
  - レベルが上がるとゴーストが速くなる
  - 無限に続けられる
  - 難易度が徐々に上昇

### 🎯 操作方法
- **矢印キー** - パックマンを上下左右に移動
- **SPACE** - 一時停止/再開

### 🍒 アイテムシステム

| アイテム | 得点 | 効果 |
|---|---|---|
| ⚪ ドット | 10点 | 基本アイテム |
| 🔵 パワーエサ | 50点 | 10秒間ゴーストを食べられる |
| 🍒 チェリー | 100点 | レベル1ボーナス |
| 🍓 イチゴ | 300点 | レベル2ボーナス |
| 🍊 オレンジ | 500点 | レベル3ボーナス |
| 🍎 リンゴ | 700点 | レベル4ボーナス |
| 🍇 ブドウ | 1000点 | レベル5ボーナス |

### ⚡ パワーモード
- パワーエサを食べると10秒間発動
- ゴーストが青く変わり、逃げ回る
- ゴーストを食べると高得点
  - 1匹目：200点
  - 2匹目：400点
  - 3匹目：800点
  - 4匹目：1600点

### 📊 統計機能
- ハイスコア記録
- 最高レベル
- 総ゲーム数
- 総ドット数
- ゴースト撃退数
- LocalStorageで永続化

### 🏆 達成システム
- ドット100個、500個達成
- ゴースト撃退通知
- フルーツ取得通知
- レベルクリア通知
- 新記録達成通知

## ゲームルール

### 基本ルール
1. 矢印キーでパックマンを操作
2. すべてのドットを食べればレベルクリア
3. ゴーストに触れるとライフ減少（3ライフ）
4. ライフが0になるとゲームオーバー

### パワーエサ
- マップの4隅に配置
- 食べると10秒間ゴーストを食べられる
- ゴーストは青くなり、逃げ回る
- 食べたゴーストは目だけになり、復帰する

### フルーツ
- 70個目と170個目のドットで出現
- 10秒間で消える
- レベルに応じて種類が変わる
- 高レベルほど高得点

### ゴーストの行動
- **Blinky（赤）**: パックマンを直接追跡
- **Pinky（ピンク）**: パックマンの前方4マスを狙う
- **Inky（水色）**: Blinkyと連携して挟み撃ち
- **Clyde（オレンジ）**: 距離が近いと逃げる

### トンネル
- 画面の左右端は繋がっている
- パックマンとゴーストは通過可能
- 逃げるための戦略的ポイント

## 技術的特徴

### Canvas描画
```javascript
class PacmanGame {
    draw() {
        // マップ描画（壁、通路）
        // ドット描画
        // パワーペレット描画（パルス効果）
        // ゴースト描画（形状、目）
        // パックマン描画（口のアニメーション）
    }
}
```

### ゲームループ
```javascript
update(currentTime) {
    const deltaTime = (currentTime - this.lastTime) / 16.67;

    // パワーモードタイマー更新
    // パックマン移動
    // ゴースト移動（AI）
    // 衝突判定
    // 描画

    requestAnimationFrame((time) => this.update(time));
}
```

### 移動システム
```javascript
movePacman(deltaTime) {
    // 次の方向に曲がれるかチェック
    if (this.canMove(nextX, nextY)) {
        this.pacman.direction = this.pacman.nextDirection;
    }

    // 現在の方向に移動
    // トンネル処理（画面端のループ）
    // 口のアニメーション更新
}
```

### ゴーストAI
```javascript
moveGhosts(deltaTime) {
    ghosts.forEach(ghost => {
        if (ghost.scared) {
            // ランダムに逃げる
        } else {
            // パックマンを追跡
            const dx = pacman.x - ghost.x;
            const dy = pacman.y - ghost.y;

            if (Math.abs(dx) > Math.abs(dy)) {
                ghost.direction = { x: dx > 0 ? 1 : -1, y: 0 };
            } else {
                ghost.direction = { x: 0, y: dy > 0 ? 1 : -1 };
            }
        }
    });
}
```

### 衝突判定
```javascript
checkCollisions() {
    // ドットとの衝突
    // パワーペレットとの衝突 → パワーモード発動
    // フルーツとの衝突
    // ゴーストとの衝突
    //   - パワーモード時：ゴーストを食べる
    //   - 通常時：ライフ減少
}
```

## ビジュアル

### アニメーション
- パックマンの口の開閉
- パワーペレットのパルス効果
- ゴーストの目の動き
- ライフアイコンのパルス

### カラーリング
- パックマン：黄色（#fbbf24）
- 壁：青（#2563eb）
- ドット：白
- パワーペレット：青（パルス効果）
- ゴースト：各キャラ固有色
- 怯えゴースト：青（#3b82f6）

## パフォーマンス

- 軽量実装（外部ライブラリ不要）
- 効率的なCanvas描画
- スムーズな60FPS
- deltaTime補正で安定動作

## カスタマイズ

### マップサイズ変更
```javascript
this.tileSize = 20;  // タイルのピクセルサイズ
this.cols = 28;      // 横のタイル数
this.rows = 31;      // 縦のタイル数
```

### 速度調整
```javascript
this.pacman.speed = 0.15;  // パックマンの速度
const speed = 0.1 + (this.level - 1) * 0.01;  // ゴーストの速度
```

### パワーモード時間
```javascript
this.powerDuration = 10;  // 秒数
```

### フルーツ出現タイミング
```javascript
if (this.dotsEaten === 70 || this.dotsEaten === 170) {
    this.spawnFruit();
}
```

## ブラウザ対応

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 攻略のコツ

### 初心者向け
1. **角を使う** - ゴーストは角で減速する
2. **パワーエサは温存** - ピンチの時に使う
3. **トンネル活用** - 逃げ道として使う
4. **焦らない** - 確実にドットを回収

### 中級者向け
1. **ゴーストのパターン** - 各ゴーストの動きを覚える
2. **パワーモード最大活用** - 4匹全部食べて1600点
3. **フルーツ優先** - 高得点アイテムを逃さない
4. **効率的ルート** - 無駄のない移動

### 上級者向け
1. **ゴーストの先読み** - 次の動きを予測
2. **リスク管理** - ライフと得点のバランス
3. **コンボ狙い** - パワーモードで連続撃退
4. **マップ記憶** - ドットの残りを把握

## よくあるパターン

### トンネル逃げ
```
ゴースト →  パックマン
         ←────────┐
                  │
         ┌────────┘
        ← パックマン
```
→ トンネルで反対側に出て逃げる

### 四隅攻略
```
🔵────────────🔵
│            │
│   ゴースト  │
│            │
🔵────────────🔵
```
→ パワーエサで4匹まとめて撃退

## ゴーストの特徴

### Blinky（赤）
- 最も攻撃的
- 常に最短距離で追跡
- レベルが上がると高速化

### Pinky（ピンク）
- 先回りして待ち伏せ
- パックマンの進行方向を予測
- 挟み撃ちが得意

### Inky（水色）
- Blinkyと連携
- 予測不能な動き
- 中盤から危険

### Clyde（オレンジ）
- 距離が近いと逃げる
- ランダムな動き
- 油断ならない存在

## レベル進行

- レベル1：ゴースト速度 0.10
- レベル2：ゴースト速度 0.11
- レベル3：ゴースト速度 0.12
- レベルごとに速度+0.01

## スコアシステム

- ドット：10点
- パワーエサ：50点
- ゴースト1匹目：200点
- ゴースト2匹目：400点
- ゴースト3匹目：800点
- ゴースト4匹目：1600点
- チェリー：100点
- イチゴ：300点
- オレンジ：500点
- リンゴ：700点
- ブドウ：1000点

## 今後の拡張予定

- [ ] より複雑なゴーストAI（本家に近い動き）
- [ ] ボーナスステージ
- [ ] カスタムマップエディタ
- [ ] マルチプレイヤー対戦
- [ ] リプレイ機能
- [ ] タイムアタックモード
- [ ] ランキングシステム
- [ ] サウンドトラック追加

## 技術スタック

- **HTML5**: Canvas API
- **CSS3**: Grid, Flexbox, Animations, Variables
- **JavaScript ES6+**: Classes, requestAnimationFrame, LocalStorage
- **Web Audio API**: サウンド効果

## パックマンの歴史

- 1980年にナムコ（現バンダイナムコ）が開発
- 岩谷徹氏がデザイン
- 世界中で最も有名なゲームキャラクターの一つ
- ギネス記録「最も成功したアーケードゲーム」

## 世界記録

- 完全クリア：最終レベル256（キルスクリーン）
- 最高得点：3,333,360点（パーフェクトゲーム）
- 最速クリア：各レベル数分

## ライセンス

MIT License

---

**プレイのヒント**: パワーエサは4隅にあります。ゴーストを一網打尽にしましょう！
