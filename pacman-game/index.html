<!DOCTYPE html>
<html lang="ja" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>パックマン - Pac-Man Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="top-nav">
        <a href="../index.html" class="home-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            ホームに戻る
        </a>
    </nav>
    <div class="game-container">
        <!-- ヘッダー -->
        <header class="header">
            <div class="logo">
                <span style="font-size: 2rem;">👻</span>
                <h1>パックマン</h1>
            </div>
            <div class="header-controls">
                <button id="soundToggle" class="icon-btn" title="サウンド切替">
                    <span id="soundOn" style="font-size: 1.25rem;">🔊</span>
                    <span id="soundOff" style="font-size: 1.25rem; display: none;">🔇</span>
                </button>
                <button id="themeToggle" class="icon-btn" title="テーマ切替">
                    <span id="darkIcon" style="font-size: 1.25rem;">🌙</span>
                    <span id="lightIcon" style="font-size: 1.25rem; display: none;">☀️</span>
                </button>
                <button id="helpBtn" class="icon-btn" title="ヘルプ">
                    <span style="font-size: 1.25rem;">❓</span>
                </button>
            </div>
        </header>

        <!-- メインコンテンツ -->
        <div class="main-content">
            <!-- 左パネル -->
            <aside class="left-panel">
                <!-- スコア -->
                <div class="panel-section score-panel">
                    <h3>スコア</h3>
                    <div id="score" class="score-display">0</div>
                </div>

                <!-- ライフ -->
                <div class="panel-section">
                    <h3>残りライフ</h3>
                    <div id="lives" class="lives-display">
                        <span class="life-icon">🟡</span>
                        <span class="life-icon">🟡</span>
                        <span class="life-icon">🟡</span>
                    </div>
                </div>

                <!-- レベル -->
                <div class="panel-section">
                    <h3>レベル</h3>
                    <div id="level" class="level-display">1</div>
                    <div class="ghost-speed">
                        <div class="speed-label">ゴーストスピード</div>
                        <div class="speed-bar">
                            <div id="ghostSpeed" class="speed-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- ゴーストステータス -->
                <div class="panel-section">
                    <h3>ゴースト</h3>
                    <div class="ghost-list">
                        <div class="ghost-item">
                            <span class="ghost-icon red">🔴</span>
                            <span class="ghost-name">Blinky</span>
                            <span id="blinkyStatus" class="ghost-status">追跡</span>
                        </div>
                        <div class="ghost-item">
                            <span class="ghost-icon pink">🩷</span>
                            <span class="ghost-name">Pinky</span>
                            <span id="pinkyStatus" class="ghost-status">待機</span>
                        </div>
                        <div class="ghost-item">
                            <span class="ghost-icon cyan">🩵</span>
                            <span class="ghost-name">Inky</span>
                            <span id="inkyStatus" class="ghost-status">待機</span>
                        </div>
                        <div class="ghost-item">
                            <span class="ghost-icon orange">🟠</span>
                            <span class="ghost-name">Clyde</span>
                            <span id="clydeStatus" class="ghost-status">待機</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- ゲームボードエリア -->
            <div class="game-board-area">
                <!-- ゲーム情報 -->
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-icon">🎮</span>
                        <span id="gameStatus">矢印キーで開始</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">⏱️</span>
                        <span>パワー: <span id="powerTimer">0</span>秒</span>
                    </div>
                </div>

                <!-- キャンバス -->
                <div class="canvas-container">
                    <canvas id="gameCanvas" width="560" height="620"></canvas>

                    <!-- ゲームオーバーレイ -->
                    <div id="gameOverlay" class="game-overlay">
                        <div class="overlay-content">
                            <div id="overlayEmoji" style="font-size: 5rem; margin-bottom: 1rem;">🎮</div>
                            <h2 id="overlayTitle">ゲーム開始</h2>
                            <div class="overlay-stats">
                                <div class="overlay-stat">
                                    <div class="overlay-label">スコア</div>
                                    <div id="finalScore" class="overlay-value">0</div>
                                </div>
                                <div class="overlay-stat">
                                    <div class="overlay-label">レベル</div>
                                    <div id="finalLevel" class="overlay-value">1</div>
                                </div>
                                <div class="overlay-stat">
                                    <div class="overlay-label">ドット</div>
                                    <div id="dotsEaten" class="overlay-value">0</div>
                                </div>
                            </div>
                            <button id="restartBtn" class="btn btn-primary btn-large">もう一度プレイ</button>
                        </div>
                    </div>
                </div>

                <!-- コントロールヒント -->
                <div class="controls-hint">
                    <div class="hint-item">
                        <kbd>↑</kbd>
                        <span>上移動</span>
                    </div>
                    <div class="hint-item">
                        <kbd>←</kbd>
                        <span>左移動</span>
                    </div>
                    <div class="hint-item">
                        <kbd>↓</kbd>
                        <span>下移動</span>
                    </div>
                    <div class="hint-item">
                        <kbd>→</kbd>
                        <span>右移動</span>
                    </div>
                    <div class="hint-item">
                        <kbd>SPACE</kbd>
                        <span>一時停止</span>
                    </div>
                </div>
            </div>

            <!-- 右パネル -->
            <aside class="right-panel">
                <!-- 統計 -->
                <div class="panel-section">
                    <h3>統計</h3>
                    <div class="stat-item">
                        <span class="stat-label">ハイスコア</span>
                        <span id="highScore" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">最高レベル</span>
                        <span id="maxLevel" class="stat-value">1</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">総ゲーム数</span>
                        <span id="totalGames" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">総ドット数</span>
                        <span id="totalDots" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ゴースト撃退</span>
                        <span id="ghostsEaten" class="stat-value">0</span>
                    </div>
                </div>

                <!-- コントロール -->
                <div class="panel-section">
                    <h3>コントロール</h3>
                    <div class="controls-panel">
                        <button id="newGameBtn" class="btn btn-primary">
                            <span style="font-size: 1.25rem;">🎮</span>
                            <span>新しいゲーム</span>
                        </button>
                        <button id="pauseBtn" class="btn btn-secondary" disabled>
                            <span style="font-size: 1.25rem;">⏸️</span>
                            <span>一時停止</span>
                        </button>
                    </div>
                </div>

                <!-- アイテム説明 -->
                <div class="panel-section">
                    <h3>アイテム</h3>
                    <div class="items-list">
                        <div class="item-row">
                            <span class="item-icon">⚪</span>
                            <span class="item-name">ドット</span>
                            <span class="item-points">10点</span>
                        </div>
                        <div class="item-row">
                            <span class="item-icon">🔵</span>
                            <span class="item-name">パワーエサ</span>
                            <span class="item-points">50点</span>
                        </div>
                        <div class="item-row">
                            <span class="item-icon">🍒</span>
                            <span class="item-name">チェリー</span>
                            <span class="item-points">100点</span>
                        </div>
                        <div class="item-row">
                            <span class="item-icon">🍓</span>
                            <span class="item-name">イチゴ</span>
                            <span class="item-points">300点</span>
                        </div>
                        <div class="item-row">
                            <span class="item-icon">🍊</span>
                            <span class="item-name">オレンジ</span>
                            <span class="item-points">500点</span>
                        </div>
                    </div>
                </div>

                <!-- 達成項目 -->
                <div class="panel-section">
                    <h3>今回の達成</h3>
                    <div id="achievementsList" class="achievements-list">
                        <div class="achievement-placeholder">まだ達成項目なし</div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- ヘルプモーダル -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ヘルプ - ゲームの遊び方</h2>
                <button class="modal-close">✕</button>
            </div>
            <div class="modal-body">
                <h3>基本ルール</h3>
                <ul class="help-list">
                    <li>🎯 矢印キーでパックマンを操作</li>
                    <li>⚪ すべてのドットを食べればレベルクリア</li>
                    <li>👻 ゴーストに触れるとライフ減少</li>
                    <li>❤️ ライフが0になるとゲームオーバー</li>
                </ul>

                <h3>アイテム</h3>
                <ul class="help-list">
                    <li>⚪ ドット - 10点、マップ内に配置</li>
                    <li>🔵 パワーエサ - 50点、ゴーストを食べられる</li>
                    <li>🍒 チェリー - 100点、ランダム出現</li>
                    <li>🍓 イチゴ - 300点、ランダム出現</li>
                    <li>🍊 オレンジ - 500点、ランダム出現</li>
                </ul>

                <h3>パワーエサ</h3>
                <ul class="help-list">
                    <li>パワーエサを食べると10秒間ゴーストを食べられる</li>
                    <li>ゴースト1匹目：200点</li>
                    <li>ゴースト2匹目：400点</li>
                    <li>ゴースト3匹目：800点</li>
                    <li>ゴースト4匹目：1600点</li>
                </ul>

                <h3>ゴースト</h3>
                <ul class="help-list">
                    <li>🔴 Blinky（赤）- パックマンを直接追跡</li>
                    <li>🩷 Pinky（ピンク）- パックマンの前方を狙う</li>
                    <li>🩵 Inky（水色）- Blinkyと連携して挟む</li>
                    <li>🟠 Clyde（オレンジ）- ランダムに動く</li>
                </ul>

                <h3>操作方法</h3>
                <ul class="help-list">
                    <li>↑ - 上に移動</li>
                    <li>← - 左に移動</li>
                    <li>↓ - 下に移動</li>
                    <li>→ - 右に移動</li>
                    <li>SPACE - 一時停止/再開</li>
                </ul>

                <h3>レベルシステム</h3>
                <ul class="help-list">
                    <li>レベルが上がるとゴーストが速くなる</li>
                    <li>フルーツの出現頻度が上がる</li>
                    <li>パワーエサの効果時間が短くなる</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
