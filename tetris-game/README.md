# テトリス - Tetris Game

本格的なテトリスゲーム。クラシックなゲームプレイに現代的なUIを組み合わせた高品質Webアプリケーションです。

## 主な機能

### 🎮 ゲームプレイ
- **完全なテトリスルール実装**
  - 7種類のテトロミノ（I, O, T, S, Z, J, L）
  - 正確な当たり判定
  - スムーズな回転システム
  - 壁キック機能

- **ゲーム機能**
  - ホールド機能（ブロックの保管）
  - ゴーストピース（着地予測）
  - ハードドロップ
  - レベルシステム
  - 段階的な速度上昇

### 🎯 得点システム

- **ライン消去**
  - 1ライン: 100点 × レベル
  - 2ライン: 300点 × レベル
  - 3ライン: 500点 × レベル
  - 4ライン（テトリス）: 800点 × レベル

- **ソフトドロップ**: 1点/マス

### 📊 統計機能
- ハイスコア記録
- 総ゲーム数
- 総ライン数
- リアルタイム達成表示
- LocalStorageで永続化

### 🎨 ビジュアル
- **Canvas描画による滑らかな表現**
  - 3D風ブロックデザイン
  - ゴーストピース表示
  - グリッド線
  - ハイライト効果

- **UI/UX**
  - モダンなデザイン
  - ダークモード/ライトモード
  - レスポンシブ対応
  - スムーズなアニメーション

## 操作方法

### キーボード操作
- **← →** - ブロックを左右に移動
- **↓** - ソフトドロップ（高速落下）
- **↑ / SPACE** - ブロックを回転
- **C** - ホールド（ブロックを保管）
- **P** - 一時停止

### ボタン操作
- スタート - ゲーム開始
- 一時停止 - ゲームの一時停止
- リセット - ゲームをリセット

## ゲームルール

### 基本ルール
1. 上から落ちてくるテトロミノを操作
2. 横一列を埋めるとラインが消える
3. ブロックが天井に達するとゲームオーバー

### レベルシステム
- 10ライン消去ごとにレベルアップ
- レベルが上がると落下速度が速くなる
- 開始レベルを選択可能（1, 3, 5, 10）

### ホールド機能
- Cキーで現在のブロックを保管
- 保管したブロックは後で使用可能
- 1ターンに1回のみ使用可能

## テトロミノの種類

### I（アイ）- シアン
```
████████
```
- 直線型
- 唯一の4マスブロック
- テトリス（4ライン消去）に最適

### O（オー）- イエロー
```
██
██
```
- 正方形
- 回転しても形が変わらない

### T（ティー）- パープル
```
 ██
████
```
- T字型
- バランスの良い形状

### S（エス）- グリーン
```
 ████
████
```
- S字型
- Z字型と対

### Z（ゼット）- レッド
```
████
 ████
```
- Z字型
- S字型と対

### J（ジェイ）- ブルー
```
██
████
```
- J字型
- L字型と対

### L（エル）- オレンジ
```
  ██
████
```
- L字型
- J字型と対

## 技術的特徴

### アーキテクチャ
```javascript
class TetrisGame {
    // ゲーム状態
    board[][]           // 10x20のゲームボード
    currentPiece        // 現在のテトロミノ
    nextPiece           // 次のテトロミノ
    holdPiece           // ホールド中のテトロミノ

    // ゲームループ
    update(time)        // フレーム更新
    draw()              // Canvas描画

    // ゲームロジック
    collision()         // 衝突判定
    merge()             // ブロックの固定
    clearLines()        // ライン消去
    rotate()            // 回転（壁キック付き）
}
```

### Canvas描画
- **60FPS描画** - requestAnimationFrame使用
- **レイヤー構造** - ボード、現在ピース、ゴースト
- **3Dエフェクト** - グラデーションとハイライト
- **効率的描画** - 差分更新

### 衝突判定アルゴリズム
```javascript
collision() {
    // 各ブロックマスをチェック
    for (y, x in currentPiece.shape) {
        if (outOfBounds || occupiedCell) {
            return true;
        }
    }
    return false;
}
```

### 回転システム
- **SRS（Super Rotation System）風** の実装
- 壁キック対応
- スムーズな回転体験

## パフォーマンス

- 軽量実装（外部ライブラリ不要）
- 効率的なCanvas描画
- 60FPSアニメーション
- メモリ効率的な配列管理

## カスタマイズ

### ブロックカラー変更
`app.js`の`pieces`オブジェクト：

```javascript
this.pieces = {
    'I': {
        shape: [[1, 1, 1, 1]],
        color: '#00f0f0'  // ← カラー変更
    },
    // ...
}
```

### レベル速度調整
```javascript
updateDropInterval() {
    this.dropInterval = Math.max(100, 1000 - (this.level - 1) * 100);
    // ← 式を変更して速度調整
}
```

### 得点システム
```javascript
const points = [0, 100, 300, 500, 800];
this.score += points[linesCleared] * this.level;
// ← 配列の値を変更
```

## ブラウザ対応

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 今後の拡張予定

- [ ] タイムアタックモード
- [ ] マルチプレイヤー対戦
- [ ] カスタムスキン
- [ ] リプレイ機能
- [ ] ランキングシステム
- [ ] アニメーション強化
- [ ] BGM・効果音
- [ ] モバイルタッチ操作
- [ ] AI対戦モード

## 技術スタック

- **HTML5**: Canvas API
- **CSS3**: Grid, Flexbox, Animations, Variables
- **JavaScript ES6+**: Classes, requestAnimationFrame, LocalStorage
- **Web Audio API**: サウンド効果

## テトリス豆知識

### テトリスの歴史
- 1984年にソ連のアレクセイ・パジトノフが開発
- 世界で最も有名なパズルゲームの一つ
- ギネス記録多数保持

### テトリス効果
- プレイ後に実生活でもブロックを組み合わせる感覚が残る現象
- 認知心理学の研究対象

### 競技テトリス
- 世界大会が開催される
- プロプレイヤーが存在
- 1分間に数百ラインを消すプレイヤーも

## 攻略のコツ

1. **平らに積む** - 凹凸を少なくする
2. **I字を温存** - テトリス（4ライン消去）を狙う
3. **ホールドを活用** - 最適なタイミングで使う
4. **先読み** - 次のブロックを常に確認
5. **落ち着いて** - 焦らず確実に配置

## ライセンス

MIT License

---

**開発者向けノート**: このテトリスは教育目的で作成されています。商用利用の際はテトリスの商標権に注意してください。
